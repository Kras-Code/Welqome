<!-- hide content until auth resolved (prevents flash) -->
<style>
    html {
        visibility: hidden;
    }
</style>

<script type="module" src="/assets/js/auth-guard.js"></script>

<html lang="en">
    <body>
        <p>Success!</p>

        <!-- Sign out control -->
        <button id="signOutBtn" type="button" aria-label="Sign out">Sign out</button>

        <!-- Firebase Auth v12.4.0 sign-out -->
        <script type="module">
            import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

            // Uses the default Firebase app (make sure your init ran before this)
            const auth = getAuth();

            document.getElementById("signOutBtn")?.addEventListener("click", async () => {
                try {
                    await signOut(auth);
                    // Redirect after sign-out:
                    window.location.replace("/");
                } catch (err) {
                    console.error("Sign-out failed:", err);
                    alert("Sign-out failed. See console for details.");
                }
            });
        </script>
    </body>

</html>